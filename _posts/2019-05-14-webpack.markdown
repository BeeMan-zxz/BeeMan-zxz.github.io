---
layout:     post
title:      "webpack项目包管理"
subtitle:   "利用webpack模块打包工具打包项目"
date:       2019-05-14 20:02
author:     "ZXZ"
header-style:   "text"
header-img: "img/home-bg-o.jpg"
tags:
    - webpack
    - Vue
    - 包管理工具
---


# webpack介绍

Webpack 是一个前端资源加载和打包工具。所谓的模块就是在平时的前端开发中，用到一些静态资源，如JavaScript、CSS、图片等文件，webpack就将这些静态资源文件称之为模块。 webpack支持AMD和CommonJS，以及其他的一些模块系统，并且兼容多种JS书写规范，可以处理模块间的依赖关系，所以具有更强大的JS模块化的功能，它能对静态资源进行统一的管理以及打包发布。 作为一款 Grunt和Gulp的替代产品，Webpack受到大多数开发者的喜爱，因为它能够编译打包CSS，做CSS预处理，对JS的方言进行编译，打包图片，代码压缩等等。

>我们要知道webpack是基于node.js的


# 我们以一个例子来学习webpack的使用方式

>首先我们要了解webpack的基本概念
Webpack 本质上是一个打包工具，它会根据代码的内容解析模块依赖，帮助我们把多个模块的代码打包。下面是Webpack官网给的一个说明图。 
![img](../img/webpack.png)
如上图，webpack 会把项目中使用到的多个代码模块（可以是不同文件类型），打包构建成项目运行仅需要的几个静态文件（如.js、.css等）。

###准备工作
所以首先我们要把项目的一些必用的文件整理好,一般会有js,css,images,等一些资源文件夹
还有很重要的入口文件,而Webpack构建的项目的默认的入口文件就是“./src/index.js” 
还有一个很重要的主页面main.html,这个页面就是我们的主页面,也就是我们项目的显示端
如下图:
![img](../img/webpack-01.png)


###然后安装webpack
再cmd窗口输入 `npm install webpack webpack-cli -g` 下载webpack 和 webpack-cli工具
*webpack-cli 是 webpack的命令行工具  -g 表示全局安装 但是不推荐全局安装*
这里我们再本地安装也就是项目里面安装
`npm i webpack -D` `npm i webpack-cli -D`
*install 可以省略为 i -D 是因为我的项目是再D盘 这是两个工具所以可以分开下载*
下载完成后如图片:
![img](../img/webpack-02.png)


###然后配置文件
通常，我们使用`npm init`命令来创建前端项目的时候，每个项目下都必须配置有一个 `webpack.config.js`通常放在项目的根目录中
`npm init`之后会出现一个`package.json`文件 我们之后也会在这里面做一些配置
还要我们自己创建一个`webpack.config.js` 因为这个文件是必须的


###引入jquery(主要思路)
我们要求在 main.js 引入模块,jquery---`import $ from 'jquery`,当然要在本地中下载jquery
mian.js中
```js

$(function(){
 
    $('li:odd').css("backgroundColor","blue")
    $("li:even").css("backgroundColor",function(){
        return '#'+'2ecc71'
    })

});

```

这样之后还是不行,由于ES6 代码太高级 解析不了 这一行很可能会报错
我们要把要处理的资源交给webpack处理输入的结果浏览器就可以识别了
首先指定处理文件然后要知道输出文件
`webpack 处理文件路径 --output 输出文件路径 -- mode development`
**一般输出在dist文件中** dist是将来打包后项目所在位置
这个时候在主页面中引用`<script src="/dist/bundle.js"></script>`
就会实现背景颜色的更改

这时候我们再主页面中可以放一些标签来看一看效果,我们先创建一些li标签发现可以显示
我们可以加一些样式,再css文件夹中创建一个心得css样式文件就简单的去掉li前面的点
```css

li{
    list-style: none;
}

```
这时候我们在主页面中直接引入`<link rel="stylesheet" href="/src/css/index.css">`就可以轻松实现了
但是这里不推荐直接从页面中引入任何包和任何css文件,要在index,js中`import './css/index.css'`引用然后有页面调用
但是要注意 **webpack 默认值打包处理js文件 无法处理 非js文件** 
###如何在index.js中引入css文件
如果你想要处理非js 文件 我们需要一个合适 的loader  也就是我们需要手动安装一些合适的第三方loader加载器
如果想要打包处理 css 文件 我们需要安装 `cnpm i style-loader css-loader -D `
打开 webpack.config.js 这个配置文件 在里面新增一个配置节点, 叫做module,他是一个对象,在这个对象上有个 rules属性
是个数组这个数组中存放了所有第三方文件的匹配和处理规则
![img](../img/webpack-03.png)


但是当我们利用`jquery`来更改它的背景颜色的话,就不能这样引用了当然我们要引入jquery库
一下代码是利用ES6新特性更改背景颜色的
```js
$(function(){

    $('li:odd').css("backgroundColor","blue")  // :odd 是偶数行
    $("li:even").css("backgroundColor",function(){  //:even 是奇数行
        return '#'+'2ecc71'
    })

});

```